<app-alert-notif [notification]="notification"></app-alert-notif>

<app-progress-todo
  [totalDone]="totalDone"
  [totalNotDone]="totalNotDone"
></app-progress-todo>
<section fxLayout="column" fxLayoutAlign="center center">
  <button
    mat-raised-button
    color="primary"
    (click)="onAddTodo()"
    fxFlexAlign="stretch"
  >
    Add more todos
  </button>
  <div fxFlexAlign="flex-end">
    <p (click)="onChangeSortData()">
      Sort by Deadline
      <fa-icon
        [icon]="sortDeadline ? faSortAmountDown : faSortAmountUp"
      ></fa-icon>
    </p>
    <!-- <p (click)="onAnimate()">
    <fa-icon [icon]="faEdit"></fa-icon>
  </p> -->
  </div>
  <div class="empty-state" *ngIf="todos.length === 0 && !isLoading">
    No todo list yet
  </div>
  <div fxFlexAlign="center" *ngIf="isLoading">
    <mat-spinner diameter="100"> Loading...</mat-spinner>
  </div>
</section>

<section *ngIf="!isLoading">
  <mat-list role="list" fxLayout="column" fxLayoutGap="5px">
    <mat-list-item
      role="listitem"
      fxFill
      *ngFor="let todo of todos; let i = index"
      [appHover]="todo.done"
    >
      <div fxFill [@newDeletedAnimation] fxFlexAlign="center center">
        <div
          fxFlex
          [@newAddedAnimation]
          [@.disabled]="!newId.includes(todo.id)"
          (@newAddedAnimation.done)="resetDataAnimation($event)"
        >
          <div fxLayout="row" fxLayoutGap="3px">
            <small fxFlex="100" fxLayoutAlign="center center">{{
              todo.deadline | date
            }}</small>

            <div fxLayoutAlign="end center" fxFlex="15">
              <mat-icon [color]="todo.done ? 'primary' : 'accent'">{{
                todo.done ? 'check_circle' : 'highlight_off'
              }}</mat-icon
              ><small
                ><em>{{ todo.done ? 'Done' : 'Not Done' }}</em></small
              >
            </div>
            <mat-slide-toggle
              fxLayoutAlign="center center"
              [checked]="todo.done"
              (click)="onSwitchDone(todo)"
              color="primary"
            >
            </mat-slide-toggle>
          </div>
          <div>
            <p *ngIf="!todo.done">
              {{ todo.description }}
            </p>
            <p class="mb-1" *ngIf="todo.done">
              <del>{{ todo.description }}</del>
            </p>
          </div>
          <div fxLayout="row" fxLayoutAlign="flex-end center">
            <!-- <input
              type="checkbox"
              aria-label="Checkbox Done Not Done"
              [checked]="todo.done"
              (click)="onSwitchDone(todo)"
            /> -->

            <button
              mat-raised-button
              color="info"
              type="button"
              (click)="onEditData(todo)"
            >
              <fa-icon [icon]="faEdit"></fa-icon>
            </button>

            <button
              type="button"
              mat-raised-button
              color="warn"
              (click)="onConfirmDelete(todo)"
            >
              <fa-icon [icon]="faTrash"></fa-icon>
            </button>
          </div>
        </div>
      </div>
    </mat-list-item>
  </mat-list>
</section>
